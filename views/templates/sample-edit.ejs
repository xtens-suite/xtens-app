<h1><%= __("sample-manager") %></h1>
<h2><%= data.id ? __("edit-sample") : __("create-sample") %></h2>
<div id="content">
    <form class="form-horizontal edit-sample-form" role="form" data-parsley-focus="first" data-parsley-trigger="focusout" data-parsley-validate>
        <div class="container data-header-cnt">
            <div id="data-header-row" class="row data-header-row">
                <div id="data-header" class="data-header-col">
                    <div class="form-group"></div>
                    <!-- Biobank Selection -->
                    <div class="form-group metadataform-group">
                        <label for="type" class="data-label"><%= __('biobank') %></label>
                        <div class="data-input-div">
                            <select class="form-control" id="biobank" name="biobank"></select>
                        </div>
                    </div>
                    <div class="form-group metadataform-group">
                        <label for="biobank-code" class="data-label"><%= __('biobank-code') %></label>
                        <div class="data-input-div" style="width:auto;">
                            <input text class="form-control" id="biobank-code" name="biobank-code"></input>
                        </div>
                        <div class="input-group-append">
                          <button class="btn btn-default print"><%= __("print") %></button>
                          <span class="input-group-text" id="basic-addon2"><canvas style="height: 6vh;" id="barcode"></canvas></span>
                        </div>
                    </div>
                    <div class="form-group metadataform-group">
                        <label for="type" class="data-label"><%= __('data-type') %></label>
                        <div class="data-input-div">
                            <select class="form-control" id="data-type" name="data-type" required></select>
                        </div>
                        <label for="owner" class="col-md-2 data-label"><%= __("owner") %></label>
                        <div class="data-input-div">
                            <select disabled class="form-control" id="owner" name="owner" required></select>
                        </div>
                    </div>
                    <div class="form-group metadataform-group">
                        <label for="donor" class="data-label"><%= data.get("donor") && data.get("donor").length > 0 ? __('donor') : __('donors') %></label>
                        <span class="data-span"><%= data.get("donor") && data.get("donor").length > 0 ? _.map(data.get("donor"), "code").join(",") : __("select-a-type") %></span>
                        <button disabled id="editDonor" class="btn btn-danger"><%= __("edit-donor") %></button>
                    </div>
                    <% if (data.get("parentSample") && data.get("parentSample").length > 0) {%>
                    <div class="form-group metadataform-group">
                        <label for="parent-sample" class="data-label"><%= data.get("parentSample").length === 1 ?  __("parent-sample") :  __("parent-samples") %> </label>
                        <span class="data-span"><%= _.map(data.get("parentSample"), "biobankCode").join(",") %></span>
                    </div>
                    <%} %>
                    <div class="form-group metadataform-group">
                        <label for="tags" class="data-label"><%= __('tags') %></label>
                        <div class="data-input-div">
                            <input type="hidden" class="form-control" id="tags" name="tags"></input>
                        </div>
                    </div>
                    <div class="form-group metadataform-group">
                        <label for="notes" class="data-label"><%= __('notes') %></label>
                        <div class="data-input-div">
                            <textarea class="form-control" id="notes" name="notes" rows="4"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="buttonbardiv" class="row text-center">
            <div class="btn-group btn-group-margin">
                <input type="submit" id="save" class="btn btn-primary" data-target-route="samples" value="<%=__('save') %>" >
                <% if (data.id) { %>
                    <input type="hidden" id="id" name="id" value="<%= data.id %>" />
                    <button data-data-id="<%= data.id %>" data-target-route="samples" class="btn btn-danger delete"><%= __("delete") %></button>
                <%} %>
            </div>
        </div>
    </form>
</div>
<div class="sample-modal"></div>
